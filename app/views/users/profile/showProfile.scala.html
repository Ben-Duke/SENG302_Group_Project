@import factories.UserFactory
@(user: User, actualUser : User)
@import views.html.bootstrap3._
@main(actualUser, "Index") {


    <head>
        <title>View Profile</title>
    </head>

    <div class="container">
        <h1>@user.fName @user.lName
            @if(UserFactory.getUserProfilePicture(user.getUserid()) != null){
                <img class="img-circle"  width = "60" height="50" src="@{routes.HomeController.serveProfilePicture()}">
            } else {
                <img class="img-circle"  width = "60" height="50" src="@{routes.Assets.at("images/Generic.png")}">
            }
            @if(user.userIsAdmin) {
                <img class="img"  width = "60" height="50" src="../assets/images/key_2_small.png">
            }
        </h1>
    </div>

    <br>

    <div class="container">
        <div class="row">
            <div class="text-center">
                @if(UserFactory.getUserProfilePicture(user.getUserid()) != null){
                    <img class="img-circle" width = "150" height = "150" src="@{routes.HomeController.serveProfilePicture()}")>
                } else {
                    <img class="img-circle" width = "150" height = "150" src="@{routes.Assets.at("images/Generic.png")}")>
                }
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <h2>Profile</h2>
                <p>Gender: @user.gender</p>
                <p>Date of Birth: @user.dateOfBirth</p>
                @for(nationality <- user.nationality) {
                    <p>Nationality: @nationality.nationalityName</p>
                }
                <p>Creation date: @user.creationDate</p>
                <ul class="list-group">
                @for(travellerType <- user.travellerTypes) {
                    <li class="list-group-item" style = "width: 300px;">
                    @travellerType.travellerTypeName </li>
                }
                </ul>
            </div>
            <div class="col-md-4">
                <h2>Trips</h2>
                <form>
                    <div class="list-group">
                    @for(trip <- user.getTrips) {
                        @if(trip.getIsPublic) {
                            <a href="@routes.TripController.displaytrip(trip.tripid)" class="list-group-item list-group-item-action">
                            @trip.tripName
                            </a>
                        }
                    }
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                @*For the future*@
                @*<h2>Travel Partner</h2>*@
                @*<form>*@
                @*<button class="btn btn-default">Send Partner Request</button>*@
                @*</form>*@
            </div>
        </div>

        <div>
            <div id="modal-picture" class="modal">
                <img class="modal-content" id="img01">
            </div>
                <!-- defines the number of photos the user has stored in the database. Currently hardcoded until tasks are finished -->
            @for(photo <- user.getUserPhotos) {
                @if(photo.isPublic) {
                    <img class="img-thumbnail" id=@{photo.getUrl} width="60" src="@{routes.Assets.at("images/user_photos/user_" + user.getUserid + "/") + photo.getUrl}" alt="User Image">
                }
            }
            <script>
                    // Get the modal
                    var modal = document.getElementById('modal-picture');
                    // When the user clicks, they quit the modal view
                    modal.onclick = function () {
                        this.style.display = "none";
                    };

                    // Get the image and insert it inside the modal
                    var images = document.getElementsByClassName("img-thumbnail");
                    var modalImg = document.getElementById("img01");
                    // loops through each thumbnail and adds the event listener
                    for (i = 0; i < @user.getUserPhotos.length; i++) {
                        images[i].onclick = function() {
                            modal.style.display = "block";
                            modalImg.src = this.src;
                        };
                    }
            </script>
        </div>
    </div>

}